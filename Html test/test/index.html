<!doctype html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="font/flaticon.css">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  </head>
  <body>
      

    <h1 class="text-center text-primary">BASIC HTML5 TEMPLATE</h1>

    <div class="container parent">

        <div class="row child1">
            <div class="col-4">
                <i class="fa fa-address-card" aria-hidden="true"></i>
                <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Expedita possimus recusandae officiis corrupti illo error, eveniet odit illum itaque libero perferendis assumenda iste laudantium corporis provident accusamus voluptatem sequi voluptas?</p>
            </div>

            <div class="col-4">
                <i class="flaticon-knowledge" id="flaticon"></i>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus enim error nobis iure unde! Libero ea quaerat consequuntur sequi non error? Eius rem inventore, laudantium rerum libero doloribus. Dolorum, nulla.</p>
            </div>
            
            <div class="col-4">
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quo beatae incidunt aliquid accusantium cumque labore. Reiciendis libero sequi nihil atque nostrum odit, dolorem omnis facere soluta deserunt? Unde, fugit eos!</p>
            </div>
        </div>
  

        <section id="contact" class="section-bg wow fadeInUp">
          <hr>
          <div class="container">
    
            <div class="section-header">
              <h3>Contact Us</h3>
            </div>
    
    
            <div class="form">
              <form action="forms/contact.php" method="post" role="form" class="submit-email-form">
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" data-rule="minlen:4" data-msg="Please enter at least 4 chars" />
                    <div class="validate"></div>
                  </div>
                  <div class="form-group col-md-6">
                    <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" data-rule="email" data-msg="Please enter a valid email" />
                    <div class="validate"></div>
                  </div>
                </div>
                <div class="form-group">
                  <input type="text" class="form-control" name="subject" id="subject" placeholder="Subject" data-rule="minlen:4" data-msg="Please enter at least 8 chars of subject" />
                  <div class="validate"></div>
                </div>
                <div class="form-group">
                  <textarea class="form-control" name="message" rows="5" data-rule="required" data-msg="Please write something for us" placeholder="Message"></textarea>
                  <div class="validate"></div>
                </div>
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" name="image_uploads" id="customFile" accept=".jpg, .jpeg, .png, .gif, .tiff, .bmp, .psd, .pdf, .doc, .docx, .xlsx,
                    .xls, .xlsm, .pptx, .pptm, .ppt, .zip, .7z, .rar"  >
                    <label class="custom-file-label" for="customFile">
                        <span>Choose a file here</span>                                    
                    </label>
                    <p class="p-3" style="color: rgba(167, 167, 164,0.7);font-size: 0.8em;">Supported : general image,pdf,word,excel,ppt file within 2 MB.</p>
                  </div>
                <div class="text-center"><button type="submit">Send Message</button></div>
              </form>
            </div>
          </div>
        </section><!-- End Contact Section -->

    </div>
    



    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
 

  <script> 
$( document ).ready(function(){
      var input = $('#customFile');
      var span = $('.custom-file-label span');

      const fileTypes = [
      "jpg","jpeg","png","gif","tiff","bmp","pdf","doc","docx","xlsx",
      "xls","xlsm","pptx","pptm","ppt","zip","rar","7z"
      ];


      $(".custom-file").on('click', 'p#remove' , function () { 
              console.log('hi');
              input.siblings(".custom-file-label").removeClass("selected");
              $(".custom-file-label").html('<span>Choose a file here</span>');
              $(this).detach();
        });
    
      
      function returnFileSize(number) {
          if(number > 2097152){
            return false;
          }
          else
            return true;            
        //   else if(number < 1024) {
        //   return number + 'bytes';
        // } 
        //   else if(number >= 1024 && number < 1048576) {
        //   return (number/1024).toFixed(1) + 'KB';
        // } 
        //   else if(number >= 1048576) {
        //   return (number/1048576).toFixed(1) + 'MB';
        // }
      }

      function validFileType(type) {
        return fileTypes.includes(type.toLowerCase());
      }

      function getSrc(file){

        let image_arr = ["jpg","jpeg","png","gif","tiff","bmp"];
        let word_arr = ["doc","docx"];
        let xl_arr = ["xlsx","xls","xlsm"];
        let ppt_arr = ["pptx","pptm","ppt"];
        let compress_arr = ["zip","rar","7z"]
        let file_type = file.name.split(".").pop().toLowerCase();
        
        if ( image_arr.includes(file_type) ) {           
          return URL.createObjectURL(file);          
        }    
        else if ( word_arr.includes(file_type) ){
          return 'word.png';
        }
        else if ( xl_arr.includes(file_type) ){
          return "xl.png";
        }
        else if  ( ppt_arr.includes(file_type) ) {
          return "ppt.png";
        }
        else if  ( compress_arr.includes(file_type) ) {
          return "comp.png";
        }
        else if ( file_type === 'pdf'  ) {
          return "pdf.png";
        }       
        else 
          return "other.svg";
      }

      function updateImageDisplay() {

        
        var fileName = input.val().split("\\").pop();
        

        if (fileName){
          
            const file = input.prop('files')[0];
              

            if(validFileType(fileName.split('.').pop())) {

              if (returnFileSize(file.size)){

                  // para.textContent = `File name ${file.name}, file size ${returnFileSize(file.size)}.`;
                  input.siblings(".custom-file-label").addClass("selected");
                  var src = getSrc(file); 
                  input.siblings(".custom-file-label").html('<img src="'+ src +'" alt="">' +'<span>'+ fileName +'</span>')
                  if ( $(".custom-file p#remove").length == 0 ) {
                    input.siblings(".custom-file-label").after('<p id="remove">Remove file</p>');
                  }
              }
              else{
                  input.siblings(".custom-file-label").removeClass("selected");
                  $(".custom-file-label").html('<span style="color:red;">Selected file size:'+ (file.size/1048576).toFixed(2) + 'MB'+'&nbsp , exceeds the maximum allowned size of 2MB </span>');
                  $(".custom-file p#remove").detach();

              }

            }

            else {
              input.siblings(".custom-file-label").removeClass("selected");
              $(".custom-file-label").html('<span style="color:red;">Invalid file.Please see the allowed file types below.</span>');
              $(".custom-file p#remove").detach();
            }       
          }

        else{
            input.siblings(".custom-file-label").removeClass("selected");
            $(".custom-file-label").html('<span>No file choosen</span>');
            $(".custom-file p#remove").detach();
        }
      }
           
      $(".custom-file-input").on("change", function() {
            updateImageDisplay();
        });
});


  </script>


  </body>
</html>